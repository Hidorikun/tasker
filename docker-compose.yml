version: '3'

services:
  
  db:
    image: mysql
    command: --default-authentication-plugin=mysql_native_password
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: asdf
    ports:
      - 3306:3306
     
  tasker-app:
    container_name: tasker-app
    build: ./tasker-app
    environment:
      spring.profiles.active: dev
      hibernate.dialect: org.hibernate.dialect.MySQL8Dialect
      spring.datasource.url: "jdbc:mysql://db:3306/tasker?allowPublicKeyRetrieval=true&useSSL=false&createDatabaseIfNotExist=true"
    ports:
      - 4040:4040
    depends_on: 
      - db
     
# tasker-web:
#   container_name: tasker-web
#   build: ./tasker-web/package/main    
#    volumes:
#      - ./tasker-web:/usr/src/tasker-web  
#    ports:
#      - 4200:4200
    
      